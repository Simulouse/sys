<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sim.sys.dao.PharmacistDao">

    <resultMap id="pharmacistMap" type="com.sim.sys.entity.Pharmacist">
        <result property="pharmacistId" column="pharmacist_id" jdbcType="VARCHAR"/>
        <result property="password" column="password" jdbcType="VARCHAR"/>
        <result property="pharmacistName" column="pharmacist_name" jdbcType="VARCHAR"/>
    </resultMap>

    <select id="findPharmacistById" resultMap="pharmacistMap">
        select
          p.pharmacist_id, p.pharmacistName, p.password
        from pharmacist p
        where pharmacist_id = #{pharmacistId}
    </select>

    <select id="findAllByFilter" resultMap="pharmacistMap">
        select
        pharmacist_id, pharmacistName, password
        from pharmacist p
        <where>
            <if test="pharmacistId != null and pharmacistId != ''">
                and pharmacist_id = #{pharmacistId}
            </if>
            <if test="pharmacistName != null and pharmacistName != ''">
                and pharmacist_name = #{pharmacistName}
            </if>
            <if test="password != null and password != ''">
                and password = #{password}
            </if>

        </where>
    </select>

    <insert id="insertPharmacist" keyProperty="pharmacistId" useGeneratedKeys="true">
        insert into pharmacist(pharmacist_id, pharmacist_name, password)
        values (#{pharmacistId}, #{pharmacistName}, #{password})
    </insert>

    <update id="updatePharmacist">
        update pharmacist
        <set>
            <if test="password != null and password != ''">
                password = #{password},
            </if>
            <if test="pharmacistName != null and pharmacistName != ''">
                pharmacist_name = #{pharmacistName},
            </if>
        </set>
        where pharmacist_id = #{pharmacistId}
    </update>

    <delete id="deletePharmacistById">
        delete from pharmacist where pharmacist_id = #{pharmacistId}
    </delete>

</mapper>

